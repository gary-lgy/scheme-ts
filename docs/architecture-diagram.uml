@startuml
skinparam BackgroundColor transparent
skinparam componentStyle rectangle

[sExpression.ts]

component lang {
    [syntax.ts] --> [sExpression.ts]
}
note bottom of lang : also includes files generated by antlr4ts

component antlr4ts {
    [antlr4 library]
}

component parser {
    [parser.ts] ---> lang
    [parser.ts] ---> antlr4ts
}

component interpreter {
    component specialForm {
        [definitions.ts]
        [converters.ts] --> [definitions.ts]
        [evaluators.ts] --> [definitions.ts]
    }
    component builtIns {
        [arithmetic.ts]
        [control.ts]
        [equal.ts]
        [macro.ts] as builtMacro
        [pair.ts]
        [typePredicate.ts]
    }
    builtIns -[hidden]--> specialForm

    [value.ts] --> [sExpression.ts]
    [interpreter.ts] --> [procedure.ts]
    [interpreter.ts] --> [quote.ts]
    [macro.ts]
    [interpreter.ts] --> [macro.ts]

    [interpreter.ts] --> specialForm
    [interpreter.ts] --> builtIns

    specialForm ---> [value.ts]
    builtIns ---> [value.ts]
    [interpreter.ts] ---> [value.ts]
    [macro.ts] ---> [value.ts]
    [procedure.ts] ---> [value.ts]
    [quote.ts] ---> [value.ts]
}

interpreter --> [syntax.ts]

component stdlib {
    [macros.prelude.ts] -[hidden]-> [procedures.prelude.ts]
}

[index.ts] ---> parser
[index.ts] --> interpreter
[index.ts] ---> stdlib
@enduml
