!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);"undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),new Uint8Array(16);for(var o=[],r=0;r<256;++r)o.push((r+256).toString(16).substr(1));Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_CADET_LOGGER;const i=function(e){let t=null;return()=>t||(t=e(),t)}(()=>new Promise((e,t)=>{const n=indexedDB.open("evtlogs",1);n.onsuccess=t=>{e(n.result)},n.onerror=e=>{console.error("Failed to get db",e),t(n.error)},n.onupgradeneeded=e=>{(null===e||void 0===e?void 0:e.target).result.createObjectStore("logs",{keyPath:"id",autoIncrement:!0})}}));let a=!1;const s=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_CADET_LOGGER;s&&self.addEventListener("message",e=>{e.data&&"SYNC_LOGS"===e.data.type&&e.waitUntil(async function(e){var t;if(!a)try{a=!0;const n=await new Promise((e,t)=>{i().then(t=>{t.transaction(["logs"],"readwrite").objectStore("logs").getAll().onsuccess=function(t){const n=(null===t||void 0===t?void 0:t.target).result;e(n)}})}),o=n.length;if(0===o)return;await async function(e,t,n){const o=new Headers;o.append("Authorization","Bearer "+t),o.append("Content-Type","application/json");const r={method:"POST",headers:o,body:JSON.stringify(n)};if(!(await fetch(e,r)).ok)throw new Error("Just try again later")}(s,e,n);const r=n[o-1].id;await(t=r,new Promise((e,n)=>{i().then(o=>{const r=o.transaction(["logs"],"readwrite"),i=IDBKeyRange.bound(0,t,!1,!1);r.objectStore("logs").delete(i),r.oncomplete=e,r.onerror=n})}))}catch(n){}finally{a=!1}}(e.data.accessToken))})}]);
//# sourceMappingURL=sw-custom.js.map